---
import Section from "./Section.astro";
import { Image } from "astro:assets";
import type { ProjectProps } from "@types";

interface Props {
  projects: ProjectProps[];
}

const { projects } = Astro.props;
---

<Section text="Featured Projects" href="projects">
  {projects.map(({ name, summary, image, linkPreview }) => {
    // Define tags for each project
    let tags: string[] = [];

    if (name === "Amazon Review Analysis") {
      tags = [
        "Python",
        "NLP",
        "Machine Learning",
        "Classification",
        "Data Cleaning",
        "Sentiment Analysis",
      ];
    } else if (name === "Airbnb Analytics Dashboard") {
      tags = [
        "Python",
        "Data Visualization",
        "Streamlit",
        "Plotly",
        "Web Application",
        "EDA",
      ];
    } else if (name === "Marketing Binary Classification Project") {
      tags = [
        "R",
        "Machine Learning",
        "Classification",
        "Data Cleaning",
        "Feature Engineering",
        "Model Evaluation",
      ];
    }

    return (
      <div class="mb-12">
        {/* Project Card */}
        <div class="rounded-2xl bg-[#1c232d]/90 shadow-md flex flex-col sm:flex-row md:h-[440px]">
          <div class="p-8 flex flex-col justify-center flex-1">
            <h3 class="mb-5 font-serif text-3xl font-medium text-primary">
              {name}
            </h3>
            <p class="text-base text-neutral mb-6">{summary}</p>

            {/* Preview link */}
            <div class="flex gap-6 text-white">
              <a
                href={linkPreview}
                target="_blank"
                class="hover:underline after:relative after:bottom-[-5px] after:content-[url(/external.svg)]"
              >
                View
              </a>
            </div>
          </div>

          {/* Only Airbnb project shows an image */}
          {name === "Airbnb Analytics Dashboard" && (
            <div class="flex items-center justify-center flex-1 p-4">
              <Image
                class="h-auto w-full max-w-[500px] rounded-xl object-contain"
                src={image}
                alt={name}
                width="736"
                height="483"
              />
            </div>
          )}
        </div>

        {/* Tags BELOW each card */}
        <div class="flex flex-wrap gap-2 mt-4 ml-2">
          {tags.map((tag) => (
            <span class="px-3 py-1 text-sm bg-[#2a3340] text-white/80 rounded-full border border-neutral/20">
              {tag}
            </span>
          ))}
        </div>
      </div>
    );
  })}
</Section>
